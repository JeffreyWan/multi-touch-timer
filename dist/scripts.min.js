(function(a){function c(){if(b.READY)return;b.event.determineEventTypes();for(var a in b.gestures)b.gestures.hasOwnProperty(a)&&b.detection.register(b.gestures[a]);b.event.onTouch(document,b.EVENT_MOVE,b.detection.detect),b.event.onTouch(document,b.EVENT_END,b.detection.endDetect),b.READY=!0}"use strict";var b=function(a,c){return new b.Instance(a,c||{})};b.defaults={stop_browser_behavior:{userSelect:"none",touchCallout:"none",touchAction:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},b.HAS_POINTEREVENTS=navigator.msPointerEnabled,b.HAS_TOUCHEVENTS="ontouchstart"in a,b.EVENT_TYPES={},b.DIRECTION_DOWN="down",b.DIRECTION_LEFT="left",b.DIRECTION_UP="up",b.DIRECTION_RIGHT="right",b.POINTER_MOUSE="mouse",b.POINTER_TOUCH="touch",b.EVENT_START="start",b.EVENT_MOVE="move",b.EVENT_END="end",b.plugins={},b.READY=!1,b.Instance=function(a,d){var e=this;return c(),this.element=a,this.enabled=!0,this.options=b.utils.extend(b.utils.extend({},b.defaults),d||{}),this.options.stop_browser_behavior&&b.utils.stopDefaultBrowserBehavior(this),b.event.onTouch(a,b.EVENT_START,function(a){e.enabled&&b.detection.startDetect(e,a)}),this},b.Instance.prototype={on:function(a,b){var c=a.split(" ");for(var d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){var c=a.split(" ");for(var d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=document.createEvent("Event");return c.initEvent(a,!0,!0),c.gesture=b,this.element.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var d=null,e=!1,f=!1;b.event={bindDom:function(a,b,c){var d=b.split(" ");for(var e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,c,g){var h=this;this.bindDom(a,b.EVENT_TYPES[c],function(i){var j=i.type.toLowerCase();j.match(/start|down|move/)&&(i.which===1||j.match(/touch/)||i.pointerType&&i.pointerType==i.MSPOINTER_TYPE_TOUCH)&&(e=!0),j.match(/touch|pointer/)&&(f=!0),e&&(!f||!j.match(/mouse/))&&(b.HAS_POINTEREVENTS&&c!=b.EVENT_END&&b.PointerEvent.updatePointer(c,i),c===b.EVENT_END&&d!==null?i=d:d=i,g.call(b.detection,h.collectEventData(a,c,i)),b.HAS_POINTEREVENTS&&c==b.EVENT_END&&b.PointerEvent.updatePointer(c,i)),j.match(/up|cancel|end/)&&(e=!1,f=!1,b.PointerEvent.reset())})},determineEventTypes:function(){var a;b.HAS_POINTEREVENTS?a=["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel"]:a=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],b.EVENT_TYPES[b.EVENT_START]=a[0],b.EVENT_TYPES[b.EVENT_MOVE]=a[1],b.EVENT_TYPES[b.EVENT_END]=a[2]},getTouchList:function(a){return b.HAS_POINTEREVENTS?b.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,c,d){var e=this.getTouchList(d,c),f=b.POINTER_TOUCH;if(d.type.match(/mouse/)||d.poinerType&&d.pointerType===d.MSPOINTER_TYPE_MOUSE)f=b.POINTER_MOUSE;return{center:b.utils.getCenter(e),timestamp:d.timestamp||(new Date).getTime(),target:d.target,touches:e,eventType:c,pointerType:f,srcEvent:d,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return b.detection.stopDetect()}}}},b.PointerEvent={pointers:{},getTouchList:function(){var a=this.pointers,b=[];return Object.keys(a).sort().forEach(function(c){b.push(a[c])}),b},updatePointer:function(a,c){a==b.EVENT_END?delete this.pointers[c.pointerId]:(c.identifier=c.pointerId,this.pointers[c.pointerId]=c)},reset:function(){this.pointers={}}},b.utils={extend:function(a,b){for(var c in b)a[c]=b[c];return a},getCenter:function(a){var b=[],c=[];for(var d=0,e=a.length;d<e;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return Math.atan2(c,d)*180/Math.PI},getDirection:function(a,c){var d=Math.abs(a.pageX-c.pageX),e=Math.abs(a.pageY-c.pageY);return d>=e?a.pageX-c.pageX>0?b.DIRECTION_LEFT:b.DIRECTION_RIGHT:a.pageY-c.pageY>0?b.DIRECTION_UP:b.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==b.DIRECTION_UP||a==b.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a){var b,c=["webkit","khtml","moz","ms","o",""],d=a.options.stop_browser_behavior;if(!d)return;for(var e=0;e<c.length;e++)for(var f in d)d.hasOwnProperty(f)&&(b=f,c[e]&&(b=c[e]+b.substring(0,1).toUpperCase()+b.substring(1)),a.element.style[b]=d[f]);d.userSelect=="none"&&(a.element.onselectstart=function(){return!1})}},b.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,c){if(this.current)return;this.stopped=!1,this.current={inst:a,startEvent:b.utils.extend({},c),lastEvent:!1,name:""},this.detect(c)},detect:function(a){if(!this.current||this.stopped)return;a=this.extendEventData(a);var b=this.current.inst.options;for(var c=0,d=this.gestures.length;c<d;c++){var e=this.gestures[c];if(!this.stopped&&b[e.name]!==!1&&e.handler.call(e,a,this.current.inst)===!1){this.stopDetect();break}}this.current&&(this.current.lastEvent=a)},endDetect:function(a){this.detect(a),this.stopDetect()},stopDetect:function(){this.previous=b.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var c=this.current.startEvent;if(c&&(a.touches.length!=c.touches.length||a.touches===c.touches)){c.touches=[];for(var d=0,e=a.touches.length;d<e;d++)c.touches.push(b.utils.extend({},a.touches[d]))}var f=a.timestamp-c.timestamp,g=a.center.pageX-c.center.pageX,h=a.center.pageY-c.center.pageY,i=b.utils.getVelocity(f,g,h);return b.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:b.utils.getDistance(c.center,a.center),angle:b.utils.getAngle(c.center,a.center),direction:b.utils.getDirection(c.center,a.center),scale:b.utils.getScale(c.touches,a.touches),rotation:b.utils.getRotation(c.touches,a.touches),startEvent:c}),a},register:function(a){var c=a.defaults||{};return typeof c[a.name]=="undefined"&&(c[a.name]=!0),b.utils.extend(b.defaults,c),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},b.gestures=b.gestures||{},b.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,c){switch(a.eventType){case b.EVENT_START:clearTimeout(this.timer),b.detection.current.name=this.name,this.timer=setTimeout(function(){b.detection.current.name=="hold"&&c.trigger("hold",a)},c.options.hold_timeout);break;case b.EVENT_MOVE:a.distance>c.options.hold_threshold&&clearTimeout(this.timer);break;case b.EVENT_END:clearTimeout(this.timer)}}},b.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handler:function(a,c){if(a.eventType==b.EVENT_END){var d=b.detection.previous;if(a.deltaTime>c.options.tap_max_touchtime||a.distance>c.options.tap_max_distance)return;d&&d.name=="tap"&&a.timestamp-d.lastEvent.timestamp<c.options.doubletap_interval&&a.distance<c.options.doubletap_distance?b.detection.current.name="doubletap":b.detection.current.name="tap",c.trigger(b.detection.current.name,a)}}},b.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,c){if(a.eventType==b.EVENT_END){if(c.options.swipe_max_touches>0&&a.touches.length>c.options.swipe_max_touches)return;if(a.velocityX>c.options.swipe_velocity||a.velocityY>c.options.swipe_velocity)c.trigger(this.name,a),c.trigger(this.name+a.direction,a)}}},b.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1},triggered:!1,handler:function(a,c){if(b.detection.current.name!=this.name&&this.triggered){c.trigger(this.name+"end",a),this.triggered=!1;return}if(c.options.drag_max_touches>0&&a.touches.length>c.options.drag_max_touches)return;switch(a.eventType){case b.EVENT_START:this.triggered=!1;break;case b.EVENT_MOVE:if(a.distance<c.options.drag_min_distance&&b.detection.current.name!=this.name)return;b.detection.current.name=this.name;var d=b.detection.current.lastEvent.direction;c.options.drag_lock_to_axis&&d!==a.direction&&(b.utils.isVertical(d)?a.direction=a.deltaY<0?b.DIRECTION_UP:b.DIRECTION_DOWN:a.direction=a.deltaX<0?b.DIRECTION_LEFT:b.DIRECTION_RIGHT),this.triggered||(c.trigger(this.name+"start",a),this.triggered=!0),c.trigger(this.name,a),c.trigger(this.name+a.direction,a),(c.options.drag_block_vertical&&b.utils.isVertical(a.direction)||c.options.drag_block_horizontal&&!b.utils.isVertical(a.direction))&&a.preventDefault();break;case b.EVENT_END:this.triggered&&c.trigger(this.name+"end",a),this.triggered=!1}}},b.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,c){if(b.detection.current.name!=this.name&&this.triggered){c.trigger(this.name+"end",a),this.triggered=!1;return}if(a.touches.length<2)return;c.options.transform_always_block&&a.preventDefault();switch(a.eventType){case b.EVENT_START:this.triggered=!1;break;case b.EVENT_MOVE:var d=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(d<c.options.transform_min_scale&&e<c.options.transform_min_rotation)return;b.detection.current.name=this.name,this.triggered||(c.trigger(this.name+"start",a),this.triggered=!0),c.trigger(this.name,a),e>c.options.transform_min_rotation&&c.trigger("rotate",a),d>c.options.transform_min_scale&&(c.trigger("pinch",a),c.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case b.EVENT_END:this.triggered&&c.trigger(this.name+"end",a),this.triggered=!1}}},b.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1},handler:function(a,c){c.options.prevent_default&&a.preventDefault(),a.eventType==b.EVENT_START&&c.trigger(this.name,a)}},b.gestures.Release={name:"release",index:Infinity,handler:function(a,c){a.eventType==b.EVENT_END&&c.trigger(this.name,a)}},a.Hammer=b,typeof a.define=="function"&&a.define.amd&&a.define("hammer",[],function(){return b})})(window);var MicroEvent=function(){};MicroEvent.prototype={bind:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},unbind:function(a,b){this._events=this._events||{};if(a in this._events==!1)return;this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){this._events=this._events||{};if(a in this._events==!1)return;for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(a){var b=["bind","unbind","trigger"];for(var c=0;c<b.length;c++)a.prototype[b[c]]=MicroEvent.prototype[b[c]]},function(a,b){var c=a.jQuery||a.Cowboy||(a.Cowboy={}),d;c.throttle=d=function(a,d,e,f){function i(){function l(){h=+(new Date),e.apply(c,k)}function m(){g=b}var c=this,i=+(new Date)-h,k=arguments;f&&!g&&l(),g&&clearTimeout(g),f===b&&i>a?l():d!==!0&&(g=setTimeout(f?m:l,f===b?a-i:a))}var g,h=0;return typeof d!="boolean"&&(f=e,e=d,d=b),c.guid&&(i.guid=e.guid=e.guid||c.guid++),i},c.debounce=function(a,c,e){return e===b?d(a,c,!1):d(a,e,c!==!1)}}(this);var Timer=function(){this.reset(!0),this.stop(!0)};Timer.prototype={start:function(a){a=a||!1;var b=this;if(this.remaining.time<=0)return!1;this.goal=(new Date).getTime()/1e3+this.remaining.time,this._playingInterval=setInterval(function(){b._tick(),a||b.trigger("tick",b.remaining),b.playing&&b.remaining.time===0&&(b.stop(),b.reset())},1e3),a||this.trigger("start"),!a&&!this.playing&&this.trigger("stateChange",!this.playing),this.playing=!0},stop:function(a){a=a||!1,!a&&this.playing&&this.trigger("stateChange",!this.playing),this.playing=!1,clearInterval(this._playingInterval),this._playingInterval=null,a||this.trigger("stop")},reset:function(a){a=a||!1,this.goal=0,this.remaining={hours:0,min:0,secs:0,time:0},a||this.trigger("reset"),a||this.trigger("timeChange")},setRemaining:function(a,b){b=b||!1,this.remaining.time=a,this._updateTimeDetails(b)},_tick:function(a){a=a||!1;if(!this.playing)return!1;var b=(new Date).getTime()/1e3;this.setRemaining(this.goal-b,a),this.goal-b<=0&&!a&&this.trigger("done")},_updateTimeDetails:function(a){a=a||!1,this.remaining.time<0?this.remaining={hours:0,min:0,secs:0,time:0}:(this.remaining.hours=Math.floor(this.remaining.time/3600),this.remaining.min=Math.floor(this.remaining.time%3600/60),this.remaining.secs=Math.floor(this.remaining.time%60)),a||this.trigger("timeChange")},_timeToSecs:function(a,b,c){return(a*60+b)*60+c}};var MultiTouchTimer=function(a,b){var c=this;this.timer=b,this.dom={el:document.getElementById(a)},this.dom.hours=this.dom.el.getElementsByClassName("hours")[0],this.dom.min=this.dom.el.getElementsByClassName("minutes")[0],this.dom.secs=this.dom.el.getElementsByClassName("seconds")[0],this.dom.audio=this.dom.el.getElementsByClassName("sound")[0],this.hammer=Hammer(document.body,{drag_block_horizontal:!1,prevent_default:!0,show_touches:!0,drag_max_touches:3,transform_always_block:!0}),this.hammer.on("drag",Cowboy.throttle(100,!0,function(a){c.stopDaDring();if(c.timer.playing||a.gesture.touches.length!==1)return!1;var b=a.gesture.direction=="up"?1:a.gesture.direction=="down"?-1:null;if(!b)return!1;b=b*1.5*a.gesture.velocityY,c.setTime("secs",b)})),this.hammer.on("drag",Cowboy.throttle(200,!0,function(a){if(c.timer.playing||a.gesture.touches.length<=1)return!1;var b=a.gesture.direction=="up"?1:a.gesture.direction=="down"?-1:null;if(!b)return!1;c.setTime(a.gesture.touches.length==2?"min":"hours",b)})),this.hammer.on("doubletap",function(a){c.toggle(a)}),this.hammer.on("pinch",Cowboy.throttle(100,!0,function(a){a.gesture.scale>2&&c.reset(a)})),this.timer.bind("timeChange",function(){c.updateDom(),localStorage&&(localStorage.setItem("leimiMultiTouchTimer.time",c.timer.remaining.time),localStorage.setItem("leimiMultiTouchTimer.date",Math.round((new Date).getTime())))}),this.timer.bind("stateChange",function(a){c.updateClass(a),localStorage&&localStorage.setItem("leimiMultiTouchTimer.playing",a?1:0)}),this.timer.bind("done",function(){c.driiiiing()}),this.restorePreviousState()};MultiTouchTimer.prototype={toggle:function(a){this.timer.playing?this.timer.stop():this.timer.start(),this.stopDaDring()},reset:function(a){this.timer.stop(),this.timer.reset(),this.stopDaDring()},setTime:function(a,b){b<0&&a!=="secs"&&this.timer.remaining.time<(a=="min"?60:3600)?b=0:(a=="min"&&(b=b*60<0?-60:60),a=="hours"&&(b=b*60*60<0?-3600:3600)),this.timer.setRemaining(this.timer.remaining.time+b)},updateDom:function(){this.dom.hours.innerHTML=MultiTouchTimer.Utils.leadingZeros(this.timer.remaining.hours),this.dom.min.innerHTML=MultiTouchTimer.Utils.leadingZeros(this.timer.remaining.min),this.dom.secs.innerHTML=MultiTouchTimer.Utils.leadingZeros(this.timer.remaining.secs)},updateClass:function(a){a?this.dom.el.className=document.body.className="play":this.dom.el.className=document.body.className="pause",this.dringInterval!==null&&(this.dom.el.className=document.body.className="dring")},stopDaDring:function(){clearInterval(this.dringInterval),this.dringInterval=null,this.dom.el.className=="dring"&&this.updateClass(this.timer.playing)},dring:function(){var a=document.createElement("audio"),b=["mp3","ogg"];for(var c=b.length-1;c>=0;c--){var d=document.createElement("source");d.src="sound/time."+b[c],a.appendChild(d)}a.play()},driiiiing:function(){var a=this,b=!!document.createElement("audio").canPlayType;if(!b)return!1;this.stopDaDring(),this.dringInterval=setInterval(function(){a.dring()},1300),this.dring(),this.updateClass(this.timer.playing)},restorePreviousState:function(){if(!localStorage)return!1;var a=localStorage.getItem("leimiMultiTouchTimer.time"),b=localStorage.getItem("leimiMultiTouchTimer.playing")!==null?localStorage.getItem("leimiMultiTouchTimer.playing")*1:null,c=localStorage.getItem("leimiMultiTouchTimer.date");if(a!==null)if(!b)this.timer.setRemaining(a*1),console.log(b);else if(c!==null){var d=Math.round((new Date).getTime()),e=(d-c)/1e3;this.stopDaDring(),this.timer.setRemaining(a-Math.round(e)),this.timer.start()}}},MultiTouchTimer.Utils={leadingZeros:function(a){return a<=0?a="00":a<10&&(a="0"+a),a}},MicroEvent.mixin(Timer);var daTimer=new Timer,daApp=new MultiTouchTimer("timer",daTimer);